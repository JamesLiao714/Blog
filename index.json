[{"categories":null,"contents":"參考  美國供應鏈檢討報告之結論及意涵：以半導體為例\n作者: 中華經濟研究院WTO及RTA中心 顏慧欣 副執行長、李淳 資深副執行長\n一、前言  拜登總統於2021年2月24日簽署第14017號行政命令《美國供應鏈》[1]，要求特定機關首長分別於100日內以及1年內針對特定產業展開供應鏈審查，設想可能遭遇之風險及提出強化供應鏈韌性之具體行動，做成報告提交至白宮。報告內容應包括各產業供應鏈所需的關鍵物資及原材料（critical goods and materials）、其他基本物資及原材料（other essential goods and materials），及製造或其他必要生產能力多項評估項目。針對100日內應先完成的四大領域：半導體、高容量電池、關鍵礦物和材料，以及藥物和原料藥，拜登政府已完成4項關鍵供應鏈之檢視，並於6月8日提出「100日關鍵供應鏈檢討報告」（Building Resilient Supply Chains, Revitalizing American Manufacturing, And Fostering Broad-Based Growth）[2]。\n鑑於公布檢討結果的四大領域，基本上對臺灣至為關鍵的就是半導體產業，至於其他三個產業美國也未特別提及臺灣。爰此，本文透過白宮報告對半導體產業的調查結果、風險考量與因應建議等面向，作為探討之核心。\n二、美國對半導體產業之檢討重點  （一）供應鏈之組成結構\n1.市場概況\n根據美國商務部分析，半導體（以下亦稱為晶圓或晶片）供應鏈主要涉及之供應鏈包含五個階段，分別是半導體設計、晶圓製造、封裝測試(ATP)及先進封裝、半導體材料及生產設備(SME)。檢討報告依美國半導體協會（SIA）統計研究指出，2020年全球半導體銷售總額約為4,260億美元，2021年推估為4,520億[3]。從各國半導體企業市占率來看，2019年的前六名分別是美國（47%）、韓國（19%）、日本（10%）、歐盟（10%）、臺灣（6%）以及中國（5%）[4]。\n若由商業模式觀察，美國2019年在全球各類型市場市占率，分別是整合型半導體市場（Integrated Device Manufactures, IDM。意指包含設計、生產及測試封裝垂直整合半導體市場）為51%、無廠半導體設計（Fabless Design）為65%、晶圓代工製造（Pure-Play Foundry）為10%、設備市場為40%，以及委外封測公司（Outsourced Assembly and Test companies, OSATs）則為15%[5]。\n2.供應鏈分佈情形\n由半導體供應鏈來看，美國雖然在設計、IDM、設備及材料階段仍保有優勢，但優勢正在逐漸流失，同時半導體生產製造階段則面對最大的威脅挑戰。\n檢討報告指出，美國半導體設計生態系統強大且世界領先，但問題在於銷售市場高度依賴中國。又美國仍主導半導體材料及設備，但因種類繁多，仍有部分掌握在其他國家手中。此外，由於美國國內半導體製造者有限，因而設備製造商嚴重依賴海外（亞洲）市場。此外，美國在第三代半導體GaN及SiC材料有領先優勢，但同樣面對部分原料也有過度集中在東亞地理區位之風險。至於製造能量部分，美國半導體製造在1990年代的產能佔全球37%， 至2018年只剩12%。反之，2019 年台灣佔全球半導體生產裝機容量（installed capacity）的20%，緊隨其後的是韓國之佔 19%、日本17%、中國16%及歐洲9%。\n進一步來看，在邏輯半導體、存儲半導體（記憶體）和類比半導體等三種最主要半導體類型中，以邏輯半導體最為重要。2020年時邏輯半導體約佔整體半導體市場42%之營收、存儲半導體約佔 26%，而類比類半導體約佔 14%，其餘市場由分離、光電（discrete, optoelectronic）等非集成電路半導體組成。雖然美國在分離、類比與光電元件的產量中仍有30%的佔有率，但在邏輯半導體和記憶體則分別僅有12%與4%，兩者皆是目前各種主要電子產品如手機、電腦所必須之關鍵零件。最後，在生產技術方面，目前全球能生產10奈米以下的先進節點（advanced nodes）的公司為數僅有三家，即台積電、三星與美國英特爾；台積電更是在尖端節點（leading nodes），如5奈米及7奈米產能的唯一生產者[6]。\n（二）美國半導體產業之風險考量\n半導體是所有技術產品及先進軍事系統的基礎，不但是消費者日常生活中不可或缺的部分，亦與能源、公衛、農業、消費電子、製造業、交通及國防能量有關。美國為半導體生產之全球領先國家，迄今美國半導體產業之收益仍佔全球半導體收益近五成，但數十年來半導體之製造均外包或移至海外，導致美國本土半導體製造能力的份額大幅下降。美國除缺乏製造最先進技術之能量外，無晶圓廠半導體公司亦高度依賴進口。\n1.地理區位集中度（geographic concentration ）風險\nSIA於2021年4月發表之研究報告指出位於東亞的臺灣（20%）、中國大陸（16%）、韓國（19%）與日本（17%）佔了全球近四分之三的半導體產能。以先進邏輯晶片(advanced logic chips)為例，美國及其盟友均高度仰賴產能佔全球92%之台灣，至於成熟製程邏輯晶片，美國製造也僅佔全球6%至9%，故存在「地理區位高度集中」的問題。美國對進口晶片之依賴使其在關鍵半導體供應鏈中形成新的弱點，產能的喪失威脅其在半導體供應鏈之各環節及長期的經濟競爭力。\n2.顧客集中度（customer concentration）風險\n美國設計、材料及半導體設備企業之海外營收及客戶有過度集中於中國之問題。在地緣政治因素下，美國對中國實施之出口管制限制以及中國本土半導體產業政策等，對此等美國企業境外收入有直接且顯著地影響，對台海地緣緊張也有影響。\n3.其他風險因子\n除了過度集中帶來之供應鏈脆弱及中斷（包含天災及惡意中斷）風險外，美國半導體供應鏈之其他風險因子尚包含：半導體過時及技術世代落後（generations old）導致持續盈利能力受限問題、電子生產網路效應(electronics production network effects)、 人力資本缺口及智財權被竊取等。其中電子生產網路效應部分係指「網路群聚效應」，亦即電子產品及半導體生產受益於所謂的「製造集群」(manufacturing clusters)效益，由於世界最大的電子產品客戶多數在中國，因此各國及美國半導體公司有動力在中國鄰近地區建立據點，而此一聚落結構又進一步強化了與中國建立半導體供應鏈關係的吸引力。\n（三）美國考量之因應對策\n美國在檢討報告中，表示擬採用幾項做法來保護其技術優勢，其一乃積極投資國內之生產與研發，以發展本土半導體生態系；其次也擬透過激勵措施、人才培養、資訊透明化及與盟友合作等措施，促進企業投資及重建半導體製造能量。具體而言，美國之對策可分為短期及長期二面向。\n1. 短期（短缺問題）\n美國將推動加強與產業之夥伴關係，並促進半導體製造商、供應商及終端使用者間之訊息流動（information flow）。又商務部會邀集所有利害相關人，共同推動提高透明度及數據共享。 拜登政府將在近期與日韓成功合作之基礎上，例如韓國高科技企業宣布對美半導體投資逾170億美元，加強與盟邦與合作夥伴之接洽，以促成公平分配半導體晶片、增加生產並促進投資等。又如TSMC到Arizona，除了設置5奈米每月2萬片產能，並可達到雇用1600員工之效益。\n2. 長期發展對策\n長期而言，本報告指出美國應建立具有韌性及競爭力之半導體供應鏈。美國之戰略必須包含採用防禦行動來保護其技術優勢，另一方面亦須積極投資國內之生產與研發；美國應發展一生態系，其中包含發展其創新產業以及創造高薪半導體就業發展藍圖。最後，美國應與夥伴及盟邦合作以促進全球之韌性。 美國將從四個面向重建美國製造及創新能力，包括：增加在美國半導體投資，如建議國會至少提供500億美元，投資美國本土半導體生產及研發、透過研發來維持與確保美國領先地位，對此乃提及應與美國已有「科學及技術合作協定」（Science and Technology Agreements）的國家，如台灣、歐盟等，探討R\u0026amp;D合作。 美國政府將引導建立跨國半導體「企業與產業間的夥伴」關係。\n3. 《美國製造晶片法》主要內涵\n美國國會自2020年起陸續推動立法，期能創造吸引半導體製造業回流與投資研發的誘因，相關法案包括《建立有效獎勵美國半導體生產法案》（Creating Helpful Incentives to Produce Semiconductors for America Act，又稱《美國製造晶片法》(CHIPS for America Act)）、《美國半導體晶圓廠法》（American Foundries Act），後來兩案已合併在《2021財政年度國防授權法》（National Defense Authorization Act for Fiscal Year 2021, 2021NDAA）之中，經參眾兩院通過並於2021年1月2日正式成為法律（Public Law No: 116-283），但仍需獨立預算撥款程式以落實法案要求[7]。合併後法案對美國半導體產業的重點政策或措施，主要如下:\n（1）建立與執行半導體激勵措施\n預計透過商務部，針對符合資格的公司或集團之個別計畫，提供原則上不超過30億美元的財政補貼，其條件包括:申請項目可顯著地大幅提昇國內半導體供應比例、或滿足國安需求；補貼資金需用於投資半導體製造、裝配、測試、先進封裝或研究和發展的設施和設備，以及支援前述活動所需的勞動力發展和場地開發與更新等。\n（2）要求國防部推動安全微電子學研發\n授權國防部與相關機關推動建立公私夥伴關係、也鼓勵成立公司聯盟等，以確保國防部與相關部門開發與制定可衡量的安全微電子學（measurably secure microelectronics），包括積體電路、邏輯裝置、記憶體以及支援這些微電子元件的封裝和測試方法。\n（3）設置「多邊半導體安全基金」\n授權財政部建立「多邊半導體安全基金」（Multilateral Semiconductors Security Fund），交由國務卿管理運用；並將建立一「共同資金提供機制」（common funding mechanism），用以支持美國與外國夥伴共同合作促進發展及採用永續安全的半導體及其供應鏈，以及鼓勵外國夥伴能在若干重要議題與美國合作，例如半導體政府補貼的透明化、對不符合透明化的國家有一致立場、半導體的出口管制或國安管理機制、與半導體相關的外資審查機制、針對非市場經濟國家半導體發展作法之因應、加強對智財權保護等等。\n（4）設置研發中心促進國家型先進微電子研究和發展\n法案要求增設若干研發機構，以促進先進微電子研究和發展，預計由商務部與國防部合力設置國家半導體技術中心，負責先進半導體技術的研究和原型機開發，該中心擬由私部門、能源部和國家科學基金會共同參與；此外，也將由國家科技委員會設置微電子領導力次級委員會（subcommittee on microelectronics leadership），負責制定「國家微電子研究戰略」及相關研發。\n四、美國半導體產業獎勵法案之最新進展  支持前述半導體產業發展法案的預算經費，目前已在參議院有初步斬獲。參議院多數黨領袖舒默（Chuck Schumer）等人於2021年4月21日重新提案《2021年無盡邊疆法》(Endless Frontier Act)，也為《美國製造晶片法》的半導體倡議提供相關撥款。但之後拜登政府為了重建美國如半導體等本土供應鏈，也有多項刺激產業經濟的投資支援方案，於是2021年5月18日美國參議院多數黨領導舒默（Chuck Schumer）宣布將《2021年無盡邊疆法》、《2021年戰略競爭法》(Strategic Competition Act of 2021)、《2021年因應中國挑戰法》(Meeting the China Challenge Act of 2021)等法案重新整併為《2021年美國創新和競爭法》（U.S. Innovation and Competition Act of 2021）[8]，其包含七大主題，之前個別草案遂成為《2021年美國創新和競爭法》之各單元標題，整併後之規範並未改變原草案內容，因此也包括《美國製造晶片法》在內。\n美國聯邦參議院6月8日已通過《2021年美國創新和競爭法》， A篇(division)全名為《晶片法案與5G等無線技術應用 （CHIPS Act and ORAN 5G Emergency Appropriations） 》，主要是為《國防授權法案（National Defense Authorization Act, NDAA）》訂立提撥預算的法條，例如第1002條「建立有效獎勵美國半導體生產基金（Creating helpful incentives to produce semiconductors for America funds）」，即預計在五年內提撥520億美元支援半導體產業發展，不過法案目前還在眾議院進行審議，需獲致投票通過後才能送交拜登總統簽署為法律。\n五、美國供應鏈檢討對臺灣之意涵  一如預期，美國關鍵供應鏈檢討報告結論顯示，美國半導體產業存在過於仰賴進口、本土產能不足的問題，進而提出短期及長期解決方案。對台灣未來，有挑戰也有機會。\n拜登2月的供應鏈檢討命令包含十個關鍵產業，除了6月公布的四個優先項目外，還包含資通訊技術、能源、運輸、國防、公共衛生與生物防疫、及農產品及食品等其他六個供應鏈，並要求需在一年後提出檢討，則預期明年上半年會公布所有檢討結果。這十項領域的供應鏈，不但是美國所認定對其經濟、社會、科技具有重要性，攸關美國未來競爭力的「關鍵」供應鏈，而且部分有供應短缺、普遍存在本土產能不足所引發的脆弱及受制於人的風險問題。\n平均而言，半導體加上資通訊，占了我國對美出口總值的一半以上；若再加上台商在中國組裝、生產而輸美者則影響更大。固然此一結構反映出的事實是累積40年而成形的台美電子供應鏈網絡，使得台灣早已成為美國海外代工最重要的夥伴，但由於供應鏈規模與衝擊將成正比，因此台灣當然要比其他國家更加謹慎。\n供應鏈關係可以只是檢視產業分工、技術移轉甚至利潤來源的指標，但40年來台美供應鏈這種長期的代工關係，意味著台美供應鏈絕對不是只有產業技術或商業夥伴的性質，更反映出台美雙向信賴、互惠的長期利害關係。無論從合作經驗、產製效率、科技進度乃至於價值互信，至少在半導體代工領域美國很難找到能夠取代台灣的夥伴，以致目前看來美方並無意改變與台灣之生產夥伴關係。然美國半導體供應鏈確實存在若干弱點，究其關鍵應非「都由台灣」生產，而是「都在台灣」生產的地理區位集中問題，因此最佳解法，就是由台積電在美國本土建立先進製程能量，既有助於技術取得，又有分散生產、提高韌性的效果。此例也提供未來面臨類似挑戰的我國代工業者，可參考的因應之道。\n不過與此同時也有機會。蓋美國檢討報告顯示未來將不再容忍中國在先進電池、關鍵材料，甚至於醫藥產品與能源領域所占的比重，將朝向如改變半導體分散「來源、客戶集中度」風險的方向，同樣調整其他產業，從而美國需另覓適當的替代供應來源及創建新夥伴，此對台商同時開創了新機，是可把握建立新供應鏈關係的契機。\n [1] Executive Order 14017 of February 24, 2021\n[2] The White House, Building Resilient Supply Chains, Revitalizing American Manufacturing, And Fostering Broad-Based Growth, 100-Day Reviews under Executive Order 14017, June 2021.\n[3] [1] Semiconductor Industrial Association (SIA), 2020 state of the U.S. Semiconductor Industry, at 3, Jun 18, 2020, .\n[4] SIA, at 7.\n[5] SIA, at 11.\n[6] BCG\u0026amp;SIA, Strengthening the Global Semiconductor Supply Chain in an Uncertain Era, at 5, 35, April 1, 2021, https://www.semiconductors.org/wp-content/uploads/2021/05/BCG-x-SIA-Strengthening-the-Global-Semiconductor-Value-Chain-April-2021_1.pdf.\n[7] H.R.6395 - National Defense Authorization Act for Fiscal Year 2021, Sec.9901- 9908, TITLE XCIX\u0026ndash;CREATING HELPFUL INCENTIVES TO PRODUCE SEMICONDUCTORS FOR AMERICA, https://www.congress.gov/bill/116th-congress/house-bill/6395/text\n[8] S.1260 - United States Innovation and Competition Act of 2021, https://www.congress.gov/bill/117th-congress/senate-bill/1260/text?r=1\u0026amp;s=1\n","date":"February 3, 2022","hero":"/images/default-hero.jpg","permalink":"https://jamesliao714.github.io/USsemiconductor/","summary":"參考  美國供應鏈檢討報告之結論及意涵：以半導體為例\n作者: 中華經濟研究院WTO及RTA中心 顏慧欣 副執行長、李淳 資深副執行長\n一、前言  拜登總統於2021年2月24日簽署第14017號行政命令《美國供應鏈》[1]，要求特定機關首長分別於100日內以及1年內針對特定產業展開供應鏈審查，設想可能遭遇之風險及提出強化供應鏈韌性之具體行動，做成報告提交至白宮。報告內容應包括各產業供應鏈所需的關鍵物資及原材料（critical goods and materials）、其他基本物資及原材料（other essential goods and materials），及製造或其他必要生產能力多項評估項目。針對100日內應先完成的四大領域：半導體、高容量電池、關鍵礦物和材料，以及藥物和原料藥，拜登政府已完成4項關鍵供應鏈之檢視，並於6月8日提出「100日關鍵供應鏈檢討報告」（Building Resilient Supply Chains, Revitalizing American Manufacturing, And Fostering Broad-Based Growth）[2]。\n鑑於公布檢討結果的四大領域，基本上對臺灣至為關鍵的就是半導體產業，至於其他三個產業美國也未特別提及臺灣。爰此，本文透過白宮報告對半導體產業的調查結果、風險考量與因應建議等面向，作為探討之核心。\n二、美國對半導體產業之檢討重點  （一）供應鏈之組成結構\n1.市場概況\n根據美國商務部分析，半導體（以下亦稱為晶圓或晶片）供應鏈主要涉及之供應鏈包含五個階段，分別是半導體設計、晶圓製造、封裝測試(ATP)及先進封裝、半導體材料及生產設備(SME)。檢討報告依美國半導體協會（SIA）統計研究指出，2020年全球半導體銷售總額約為4,260億美元，2021年推估為4,520億[3]。從各國半導體企業市占率來看，2019年的前六名分別是美國（47%）、韓國（19%）、日本（10%）、歐盟（10%）、臺灣（6%）以及中國（5%）[4]。\n若由商業模式觀察，美國2019年在全球各類型市場市占率，分別是整合型半導體市場（Integrated Device Manufactures, IDM。意指包含設計、生產及測試封裝垂直整合半導體市場）為51%、無廠半導體設計（Fabless Design）為65%、晶圓代工製造（Pure-Play Foundry）為10%、設備市場為40%，以及委外封測公司（Outsourced Assembly and Test companies, OSATs）則為15%[5]。\n2.供應鏈分佈情形\n由半導體供應鏈來看，美國雖然在設計、IDM、設備及材料階段仍保有優勢，但優勢正在逐漸流失，同時半導體生產製造階段則面對最大的威脅挑戰。\n檢討報告指出，美國半導體設計生態系統強大且世界領先，但問題在於銷售市場高度依賴中國。又美國仍主導半導體材料及設備，但因種類繁多，仍有部分掌握在其他國家手中。此外，由於美國國內半導體製造者有限，因而設備製造商嚴重依賴海外（亞洲）市場。此外，美國在第三代半導體GaN及SiC材料有領先優勢，但同樣面對部分原料也有過度集中在東亞地理區位之風險。至於製造能量部分，美國半導體製造在1990年代的產能佔全球37%， 至2018年只剩12%。反之，2019 年台灣佔全球半導體生產裝機容量（installed capacity）的20%，緊隨其後的是韓國之佔 19%、日本17%、中國16%及歐洲9%。\n進一步來看，在邏輯半導體、存儲半導體（記憶體）和類比半導體等三種最主要半導體類型中，以邏輯半導體最為重要。2020年時邏輯半導體約佔整體半導體市場42%之營收、存儲半導體約佔 26%，而類比類半導體約佔 14%，其餘市場由分離、光電（discrete, optoelectronic）等非集成電路半導體組成。雖然美國在分離、類比與光電元件的產量中仍有30%的佔有率，但在邏輯半導體和記憶體則分別僅有12%與4%，兩者皆是目前各種主要電子產品如手機、電腦所必須之關鍵零件。最後，在生產技術方面，目前全球能生產10奈米以下的先進節點（advanced nodes）的公司為數僅有三家，即台積電、三星與美國英特爾；台積電更是在尖端節點（leading nodes），如5奈米及7奈米產能的唯一生產者[6]。\n（二）美國半導體產業之風險考量\n半導體是所有技術產品及先進軍事系統的基礎，不但是消費者日常生活中不可或缺的部分，亦與能源、公衛、農業、消費電子、製造業、交通及國防能量有關。美國為半導體生產之全球領先國家，迄今美國半導體產業之收益仍佔全球半導體收益近五成，但數十年來半導體之製造均外包或移至海外，導致美國本土半導體製造能力的份額大幅下降。美國除缺乏製造最先進技術之能量外，無晶圓廠半導體公司亦高度依賴進口。\n1.地理區位集中度（geographic concentration ）風險\nSIA於2021年4月發表之研究報告指出位於東亞的臺灣（20%）、中國大陸（16%）、韓國（19%）與日本（17%）佔了全球近四分之三的半導體產能。以先進邏輯晶片(advanced logic chips)為例，美國及其盟友均高度仰賴產能佔全球92%之台灣，至於成熟製程邏輯晶片，美國製造也僅佔全球6%至9%，故存在「地理區位高度集中」的問題。美國對進口晶片之依賴使其在關鍵半導體供應鏈中形成新的弱點，產能的喪失威脅其在半導體供應鏈之各環節及長期的經濟競爭力。\n2.顧客集中度（customer concentration）風險\n美國設計、材料及半導體設備企業之海外營收及客戶有過度集中於中國之問題。在地緣政治因素下，美國對中國實施之出口管制限制以及中國本土半導體產業政策等，對此等美國企業境外收入有直接且顯著地影響，對台海地緣緊張也有影響。\n3.其他風險因子","tags":null,"title":"美國半導體供應鏈檢討報告"},{"categories":null,"contents":"基本資訊   比賽名稱：AICUP 農業文章文字標註及辨識 Final Report 隊伍名稱：Rule-Based Method 隊員：姜宏昀 最終成績：創意獎（innovation award）、佳作（excellent award)  F1-score 0.8063660 precision : 0.82608 recall : 0.78756     Preprocessing   先針對主辦單位所提供的excel檔，創造出一個替換的dictionary  比如說 ，就把斜紋夜盜、黑蟲、行軍蟲\u0026hellip;全部換成斜紋夜蛾，方面後續model使用   對每篇文章利用ckiptagger做斷詞  在斷詞的時候要使用 coerce_dictionary 這個參數，這個參數可以讓主辦單位提供的keywords，被強制斷出來，不然可能會發生 \u0026ldquo;黑蟲\u0026rdquo; 被斷成 [\u0026ldquo;黑\u0026rdquo; \u0026ldquo;蟲\u0026rdquo;]   把斷好詞的結果做keywords的替換  ex: 把所有 \u0026ldquo;黑蟲\u0026rdquo; 換成 \u0026ldquo;斜紋夜盜\u0026rdquo; 這樣 在這一步的時候要注意一些特別case，避免被重複替換到   針對每篇文章，取出該篇文章所有出現的keyword集合  比如說 1.txt這篇文章 keyword_set = [\u0026ldquo;黑點病\u0026rdquo;,\u0026ldquo;降雨\u0026rdquo;,\u0026ldquo;文旦柚\u0026rdquo;,\u0026ldquo;鋅錳乃浦\u0026rdquo;]    Method  在這邊我們一開始的思路有幾種\n Model-free rule-based method Information retrieval (資訊檢索) 的方法  用TFIDF，BM25之類方式做相似度比對 Deep Learning based的資訊檢索方法   Deep Learning based 的 Binary Classification 以及我在比賽最後一天想到的，我們個人認為很有創意的方法  另外在這個比賽有些重點\n Label非對稱，A是B的reference，不代表B是A的reference  非對稱代表我們的演算法/model 會需要學習到A-\u0026gt;B 跟 B-\u0026gt;A的差異!!  A-\u0026gt;B的這個 -\u0026gt; 符號可以想像成判斷B是不是A的reference，反之B-\u0026gt;A代表判斷A是不是B的reference   光是這點就可以知道TFIDF,BM25 這種相似度分數是對稱的算法表現應該不會很好   Label只有提供\u0026quot;是reference (positive)\u0026quot;  根據主辦單位所說，只要沒有列出來的全部都代表非相關(negative)    Model-free rule-based method  這個想法是我們肉眼觀察資料後發現的\n 在提供中的Label中，兩篇文章幾乎都有出現重複的關鍵字，即在講同一件事情  可能都是在講水稻這個植物，或著是都是在講要如何防治某種害蟲    因此我們認為可以使用set similarity的演算法，來比較兩篇文章中的keyword 集合相似度，在演算法的選擇中我們一開始是選用 Jaccard similarity，針對兩兩文章得到一個相似度分數，並設定一個threshold，若相似度分數大於threshold，則將這兩篇文章互相視為reference，也就是說這個方法出來的結果會是對稱的。\n透過設定threshold=0.6 大概可以得到 F1score = 0.5的表現\n 在選擇相似度算法的時候可以考慮不同算法，像是Jaccard similarity的缺點就是相似度分數與兩篇文章的keyword set size無關，因此有試過另外的這些set similarity的演算法  Overlap coefficient Sørensen–Dice coefficient    Information retrieval Method  TFIDF + cosine similarity、BM25 這兩個方法都是根據文章中出現的Term來使用演算法計算相似度，並不會考慮到文章的語意關係(假設TFIDF使用1-gram)。但是這兩個方法都只能給出兩個文章的相似分數，並不能直接告訴我們是否為\u0026quot;是reference\u0026quot;還是\u0026quot;不是reference\u0026quot;，因此我們也需要決定一個threshold，實際的算法如下\n假設有500篇文章，每篇文章都能取得其對於其他499篇文章的TFIDF(with cosine similarity)、BM25相似度分數，至於怎麼選threshold，我們嘗試了以下幾個方法\n 將其餘499篇文章的相似度分數normalize到0-1之間，設定一個threshold ex: \u0026gt;0.8，將大於threshold的文章視為reference  這個做法會有問題，對於一些文章來說，不會有reference document，若採用normalize + threshold，可能會大量降低precision，找到大量False positive data   針對499篇文章的相似度分數，算出mean, std，設定threshold為 mean + k * std，其中k是可以調的參數  此方法的想法是抓出相似分數遠大於平均值的那些document來當作reference document 此方法對比上面的方法雖然能提升precision，但還是沒有很好XD    這兩個方法雖然經過嘗試沒有得到很好的表現，其根本原因可能還是因為無法解決Label非對稱性的關係\nDeep Learning based Information Retrieval Method 這邊主要是希望通過BERT之類的Language Model來得到更好的representation，目前比較常見的做法是將每篇單獨的document丟到BERT之後利用[CLS] pooling，得到一個vector，代表high-level的document representation，再利用例如cosine-similarity之類的相似度算法，得到兩兩文章的相似度分數，再利用上面有提到過的選threshold方法來選出reference document。\n我們主要是參考了Dense Passage Retrieval for Open-Domain Question Answering與ColBERT: Efficient and Effective Passage Search via Contextualized Late Interaction over BERT這兩篇論文來實作並訓練，其中可能在input部分與算相似度部分略作改進。\n解決Label非對稱問題 參考了ColBERT的方法，我們針對文章的input做了設計\n原本架構可能是\n A的input是 [CLS] content of A [SEP]  此 [CLS] token 叫做 [CLS_A]，代表經過BERT後得到A的embedding   B的input是 [CLS] content of B [SEP]  此 [CLS] token 叫做 [CLS_B]，代表經過BERT後得到B的embedding    如果input還是這樣的話還是會有問題，因為在計算A-\u0026gt;B 與 B-\u0026gt;A時，得到的[CLS_A]與[CLS_B]是相同的!\n因此我們將Input分別針對A-\u0026gt;B，與B-\u0026gt;A做不同設計\n 當要判斷A-\u0026gt;B時  A的input是 [CLS] [Test] content of A [SEP]  此 [CLS] token 叫做 [CLS_A]，代表經過BERT後得到A的embedding 此時 [Test] token代表著我們告訴BERT，A現在是屬於被test的角色   B的input是 [CLS] [Ref] content of B [SEP]  此 [CLS] token 叫做 [CLS_B]，代表經過BERT後得到B的embedding 此時 [Ref] token代表著我們告訴BERT，B現在是屬於被ref的角色      因為BERT的特性，在input加入[Test]或是[Ref]時所得到的[CLS]embedding會不一樣，因此在A-\u0026gt;B與B-\u0026gt;A時，A與B會得到不同的[CLS] embedding，相似度分數也就不一樣了，也解決了非對稱的問題\n結果 我們調了調參數Deep learning based的方式最好可以到0.70x-0.71x(印象中)，TFIDF跟BM25忘記了XD，但比較確定的是利用input設計解決非對稱效果好滿多的，我記得有提升大概5-7%\nDeep Learning based Binary Classification  因為上面說的幾種方法都還是會遇到一個問題，就是要自己設置threshold，來決定哪些文章是reference，因此要解決這個問題就是train一個binray的classifier來讓model直接告訴我們哪些文章是positive，哪些文章是negative！\n我們這邊使用的是BERT的SequenceClassifier，input大概會像是\n A -\u0026gt; B  [CLS] content of A [SEP] content of B [SEP]   B -\u0026gt; A  [CLS] content of B [SEP] content of A [SEP]   再利用[CLS]接一個linear layer，做binary classification  可以看到這樣的模型設計有幾個優點\n 能利用到BERT的attention，學習到兩篇文章的語意資訊 能利用到BERT的attention，學習到非對稱的資訊  可能 A -\u0026gt; B 的 Label = True，但是B -\u0026gt; A 的 Label = False 透過這種input可能可以讓BERT學習到非對稱的原因    實作中上遇到幾個問題    文章長度限制\n BERT的max_length限制在512，但是經過統計，每篇文章的平均長度也是差不多500，因此如果要把兩篇串在一起勢必會超過長度 這邊的作法就是把兩邊文章分別捨棄掉後半部分，可能讓A長度限制在250，B長度限制在250，這樣就不會超過長度 直接捨棄可能不是最好的作法，但我們時間有限，如果可以的話可以試試slide window之類的切割方法，同時也可以達到data augmentataion的效果    negative的選擇\n 因為主辦單位只有提供給我們“positive\u0026quot;的label，且他有說只要不是positive，就通通都是negative 很明顯的，這樣資料會非常imbalance (negative data \u0026raquo;\u0026gt; positive data) 解決辦法是，分別去sample hard negative 以及 rand negative  hard negative  意思就是指，讓模型比較難以分辨的negative，舉例來說可以選擇兩篇文章keyword set similarity 分數很高，但其實Label 是positive的這些data，來當作hard negative   rand negative  最簡單的方式，隨機sample一些文章，當作negative，只要小心不要sample到positive的data就好     根據我們的實驗，如果只用hard negative 或只用 rand negative，表現都沒有一起使用來的好。 在training的時候可以使用cross entropy的weight，會更好train    threshold的選擇\n 一般來講binray分類通常是用argmax決定，就是比較negative跟positive的logistic哪個比較高就是哪個 可以改成過一個softmax，設定說可能大於threshold = 0.7，才當作positive threshold也是要調整的參數，一般來講調越高就是precision越高，recall會變低，反之亦然    改進方法 我們在實驗過程中發現了一個可以改進的方法，想法是說，我們透過肉眼觀察主辦單位提供的keyword是很重要的資訊，那我們就想辦法把這個knowledge告訴BERT!\n做法我們採用非常簡單的方式為\n 將 keyword set of A (document A 裡面出現的keywords之集合)與content of A concat 起來  A -\u0026gt; B  [CLS] keyword set of A ; content of A [SEP] keyword set of B ; content of B [SEP]   B -\u0026gt; A  [CLS] keyword set of B ; content of B [SEP] keyword set of A ; content of A [SEP]   其中 ; 代表 concat!    這個方式我們認為算是可以告訴BERT比較重要的token資訊，這方法非常簡單且有效！\nEnsemble 非常有效提升表現的方法，我們可以通過多Train幾顆Model來做ensemble\n 因為在訓練多顆model的時候，每顆model所選取的random negative也會不一樣，所以有點類似boosting(?)，可以讓每顆model看到不同的random negative，學習更多廣泛更不同的資訊。  至於ensemble的方式我們嘗試了\n soft voting（最後是用這個）  將不同model output的logits相加取平均   hard voting  每個model投票是positive / negative 可能設定過半數才是positive之類的    結果 如果沒有做keyword concat的話大概是落在0.70x左右，如果加上keyword concat可以提升到0.78x(public leaderboard)，提升超級多，再加上ensemble可以提昇1%左右的分數達到0.79x這樣。這也是最後我們選擇使用的方法！\n創新方法  這個方法的靈感是，我們在比賽最後發現，主辦單位提供的data，其實有大量的句子/段落是重複的\n比如說這篇文章是在training的1.txt\n 夏日乾燥炎熱的氣候，正是許多農作物害蟲好發的時機，花蓮區農業改良場籲請農民注意斜紋夜盜及甜菜夜蛾的防治，以免造成作物損失。隨著氣溫增高，許多農作物害蟲也隨之變得活躍，由監測數據顯示宜蘭地區開始出現夜蛾類害蟲的高峰，其中包括斜紋夜蛾和甜菜夜蛾。斜紋夜蛾一般人稱「黑肚蟲」，其食性幾乎是見綠就吃，是種植蔬菜的農友最傷腦筋的害蟲之一。另外青蔥產區除了斜紋夜蛾之外，還有甜菜夜蛾危害，孵化的幼蟲藏匿於蔥管內啃食青蔥，而炎熱的天氣更加速這兩種害蟲繁衍，為了減輕其所造成的嚴重經濟損失，行政院農業委員會花蓮區農業改良場呼籲花蓮宜蘭地區的農友持續進行防治工作，切勿輕忽大意。1.大量誘殺雄蟲：懸掛性費洛蒙誘蟲盒於園區外圍，藉由大量誘殺雄蟲，降低雌蟲的交尾機率，可使族群密度受到壓抑。懸掛距離為20-50公尺，大面積共同懸掛效果更佳。2.摘除卵塊：若發現葉背有毛狀卵塊，則摘除葉片，此動作可瞬間清除300-500顆即將孵化的卵粒。3.蘇力菌防治幼蟲：輪流噴施不同廠牌的蘇力菌降低幼蟲密度，蘇力菌可有效殺死初齡的夜蛾幼蟲，亦為對環境安全的微生物製劑，對人體無害。另一方面，蘇力菌也能與殺蟲農藥混合施用，可省工並降低抗藥性的發生。4.合理使用農藥：防治夜蛾的藥劑很多，應參考植物保護手冊推薦藥劑，輪流施用兩種以上藥劑避免抗藥性產生，同時應遵守安全採收期及施用倍數等使用方法，避免造成農藥殘留。\n 但是我們將這句\n 大量誘殺雄蟲：懸掛性費洛蒙誘蟲盒於園區外圍\n 在private搜尋可以找到8.txt\n 夏日乾燥炎熱的氣候，正是許多農作物害蟲好發的時機，花蓮區農業改良場籲請農民注意斜紋夜蛾及甜菜夜蛾的防治，以免造成作物損失。隨著氣溫增高，許多農作物害蟲也隨之變得活躍，由監測數據顯示宜蘭地區斜紋夜蛾及甜菜夜蛾族群數量逐漸攀升。斜紋夜蛾一般人稱「黑肚蟲」，其食性極廣，見綠就吃，是種植蔬菜的農友最傷腦筋的害蟲之一。另青蔥產區除了斜紋夜蛾之外，還有甜菜夜蛾危害，孵化的幼蟲藏匿於蔥管內啃食青蔥，而炎熱的天氣更加速這兩種害蟲繁衍。1.大量誘殺雄蟲：懸掛性費洛蒙誘蟲盒於園區外圍，藉由大量誘殺雄蟲，降低雌蟲的交尾機率，使族群密度受到壓抑。懸掛距離為20-50公尺，大面積共同懸掛效果更佳。2.摘除卵塊：若發現葉背有毛狀卵塊，則摘除葉片後帶離田區丟棄，此動作可瞬間清除300-500顆即將孵化的卵粒。3.微生物製劑防治幼蟲：輪流噴施不同廠牌的蘇力菌或核多角體病毒等對環境安全、對人體無害的微生物製劑以降低幼蟲密度。另一方面，蘇力菌也能與殺蟲農藥混合施用，可省工並降低抗藥性的發生。4.合理使用農藥：防治夜蛾的藥劑很多，應參考植物保護手冊推薦藥劑，選擇2種以上藥劑輪流施用避免抗藥性產生，同時應遵守安全採收期及施用倍數等使用方法，避免造成農藥殘留。\n 以及 17.txt\n 年初至今，常有達25℃以上高溫，且降雨少，為適合蟲害滋生及蔓延。宜蘭縣1月至2月中旬監測斜紋夜蛾及甜菜夜蛾，密度已達紅黃藍燈警戒標準。(一)斜紋夜蛾警戒區如下：壯圍鄉、宜蘭市、員山鄉、三星鄉。(二)甜菜夜蛾預警區：壯圍鄉、宜蘭市。請上述地區種植蔬菜農友特別注意進行防範此兩種夜蛾，以降低作物損失。1.大量誘殺雄蟲：懸掛性費洛蒙誘蟲盒於園區外圍，藉由大量誘殺雄蟲，降低雌蟲的交尾機率，壓制夜蛾族群密度。懸掛時距離約50公尺，大面積蔬菜產區若共同懸掛，則防治效果更佳。2.摘除卵塊：若發現葉背有毛狀卵塊，則摘除葉片，此動作可瞬間清除300-500顆即將孵化的卵粒。3.蘇力菌防治幼蟲：蘇力菌可有效殺死初齡的夜蛾幼蟲，亦為對環境安全的微生物製劑；另一方面，蘇力菌也能與其他殺蟲劑混合施用，可省工並降低抗藥性發生。然因蘇力菌容易被日光分解而降低活性，建議儘量選擇於傍晚日落時施用效果較佳。4.合理使用農藥：防治夜蛾的藥劑很多，請依作物別參考農藥資訊服務網(https://pesticide.baphiq.gov.tw/web/Insecticides_MenuItem5_5.aspx)推薦藥劑，輪流施用不同作用機制的藥劑避免產生抗藥性，同時應遵守安全採收期及施用倍數，避免造成農藥殘留問題。\n 可以發現兩篇文章似乎都在講同件事情，尤其是8.txt與1.txt 根本一模一樣\n所以有一個大膽的想法，我們可以在testing data中，對每一篇文章，去找出在training set中跟他最像的文章，其中最像的意思是相似度必須要滿足\n 大量句子/段落重複 keyword set相似 (在講同種植物，害蟲，農藥) 語意類似  如果能夠找出跟他很像的文章(集合)，就再把training的那篇文章的reference文章，用同樣的方法對應到testing data上面!\n 舉個例子 詳細來說假設training set有 A-Z 這麼多文章，testing set 有 a-z這麼多篇文章 其中 A 的 reference 是 [B, C, D] 我們拿到資料後要做的第一件事情是，把testing set map到training set上面 也就是針對a，用相似度算法找出在training set中與其相似度最高的文章(先假設都是1 to 1 mapping) 假設很剛好的，演算法告訴我們a與A 有大量的句子段落重複、keyword set也很像、也都是相同的語意 那我們要怎麼找出 a 的 reference呢? 就是把 B, C, D mapping 到 testing data上面!!就可以把它當作a的 reference了\n 當然有一些要注意的問題\n 這個mapping 不太可能設計成1 to 1，應該會設計成many to many  這個model最需要設計的地方就是mapping的方式，因為要符合\n 大量句子/段落重複  這邊通常會出現比如說預防稻熱病有三點 1) 2) 3) 發通報的人通常都直接複製貼上   keyword set相似 (在講同種植物，害蟲，農藥) 語意類似  因為可能防治方法會變，所以還要去抓到語意的資訊!    如果真的能解決mapping的問題，我們來看一下這個想法有什麼好處\n inference極快，只需要算mapping就好了!! 不用管label怎麼標的!只需要在乎mapping方式  我們在比賽最後一天有寫出來，但是只寫了一個簡單版本的1to1 mapping，相似度是直接用字串相似度比對，分數大概有0.5x，但我認為很有淺力，如果能改善mapping那邊以及相似度算法做改進，應該可以獲得不錯的成績\n","date":"January 9, 2022","hero":"/images/aicup.png","permalink":"https://jamesliao714.github.io/AICUP/","summary":"基本資訊   比賽名稱：AICUP 農業文章文字標註及辨識 Final Report 隊伍名稱：Rule-Based Method 隊員：姜宏昀 最終成績：創意獎（innovation award）、佳作（excellent award)  F1-score 0.8063660 precision : 0.82608 recall : 0.78756     Preprocessing   先針對主辦單位所提供的excel檔，創造出一個替換的dictionary  比如說 ，就把斜紋夜盜、黑蟲、行軍蟲\u0026hellip;全部換成斜紋夜蛾，方面後續model使用   對每篇文章利用ckiptagger做斷詞  在斷詞的時候要使用 coerce_dictionary 這個參數，這個參數可以讓主辦單位提供的keywords，被強制斷出來，不然可能會發生 \u0026ldquo;黑蟲\u0026rdquo; 被斷成 [\u0026ldquo;黑\u0026rdquo; \u0026ldquo;蟲\u0026rdquo;]   把斷好詞的結果做keywords的替換  ex: 把所有 \u0026ldquo;黑蟲\u0026rdquo; 換成 \u0026ldquo;斜紋夜盜\u0026rdquo; 這樣 在這一步的時候要注意一些特別case，避免被重複替換到   針對每篇文章，取出該篇文章所有出現的keyword集合  比如說 1.txt這篇文章 keyword_set = [\u0026ldquo;黑點病\u0026rdquo;,\u0026ldquo;降雨\u0026rdquo;,\u0026ldquo;文旦柚\u0026rdquo;,\u0026ldquo;鋅錳乃浦\u0026rdquo;]    Method  在這邊我們一開始的思路有幾種","tags":null,"title":"AI cup 得獎心得"},{"categories":null,"contents":"","date":"July 5, 2021","hero":"/images/default-hero.jpg","permalink":"https://jamesliao714.github.io/about/","summary":"","tags":null,"title":"個人簡歷"}]